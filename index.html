<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>myHelios Project</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top topnav" role="navigation">
        <div class="container topnav">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand topnav" href="#"><img alt="logo" src="img/logo.png"/><i>myHelios</i> Project</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#about">About</a>
                    </li>
                    <li>
                        <a href="#estimate">Estimate</a>
                    </li>
                    <li>
                        <a href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>


    <!-- Header -->
    <div id="intro"  class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="intro-message">
                        <h1><i>myHelios</i> Project</h1>
                        <h3>Shedding light on your potential solar power</h3>
                        <hr class="intro-divider">
                        <!--<ul class="list-inline intro-social-buttons">
                            <li>
                                <a href="https://twitter.com/SBootstrap" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Twitter</span></a>
                            </li>
                            <li>
                                <a href="https://github.com/IronSummitMedia/startbootstrap" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                            </li>
                            <li>
                                <a href="#" class="btn btn-default btn-lg"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Linkedin</span></a>
                            </li>
                        </ul>-->
                    </div>
                </div>
            </div>
        </div>
        <!-- /.container -->
    </div>
    <!-- /.intro-header -->

    <!-- Page Content -->
    <div id="about" class="content-section-a">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2>About the Project</h2>
					
                    <p class="lead">The solar industry has taken off in the U.S in recent years, particularly in Massachusetts. There are many different solar companies helping the state become more environmentally friendly in terms of reducing emissions through the use of the clean energy. 
					The problem is that many people are not aware of the benefits that solar could have for them. Many people see roofs across the state with solar panels and wonder if they would go well on their houses. However, it might just be a passing thought as they see it as too complicated or too expensive, without really knowing anything about the process.
					</p><p class="lead">
					Enter MyHelios. Helios was the Greek God of the sun. Our app allows anyone to see how much power they can generate from Helios, or the Sun. The app shows how users can take advantage of this clean energy source through Solar Voltaic and Solar thermal technologies. By simply entering your zip code and estimating the size of a system you would have 
					on your roof (1 through 10 kilowatts, with information provided for accurate estimates) you can find all the information you need to decide if this solar system is right for you. The solar voltaic information consists of kilowatt-hours produced on a monthly and annual basis, the monetary value of the total kilowatt-hours, the pounds of CO2 emissions avoided, and time to return on investment. 
					</p><p class="lead">
					The solar thermal side of the app takes into account the number of people living in your household, making an estimate on your hot water usage. It then calculates your monthly and annual savings from not paying for natural gas, and how many pounds of CO2 emissions are avoided.
					</p><p class="lead">
					The user might just begin using MyHelios for fun or out of curiosity, but once they realize how beneficial the solar technologies are, they become much more likely to purchase a system. It is also a valuable first tool for people who are legitimately considering getting a solar thermal or solar voltaic system installed and just need a little background on the way it all works.
					</p><p class="lead">
					MyHelios is a fun, interesting and effective way to market the different solar technologies to people who would otherwise be in the dark.
					</p>
					<p class="lead">This project was idealized and implemented during the <a target="_blank" href="http://cleanwebbos15.challengepost.com/">2015 Boston Clean Web Hackathon</a>.</p>
                </div>
            </div>

        </div>
        <!-- end of #about -->

    </div>
	
    <div id="estimate" class="content-section-a">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2>Estimate the potential of your house for Solar Power:</h2>
					<form>
					<div class="col-lg-12">
					  <div class="form-group">
						<label for="zipcode">Zip Code</label> 
						<input type="text" class="form-control"  id="zipcode" pattern="(\d{5}([\-]\d{4})?)" required style="width: 150px;"/>
						<p class="help-block">Help: please enter first 5 digits or full zip code with dash </p>
					  </div>
					  
					  <div class="form-group">
						<label for="capacity">System Capacity</label>
						<select class="form-control" id="capacity" placeholder="Select the capacity:" style="width: 150px;">
						  <option value="1">1 kW</option>
						  <option value="2">2 kW</option>
						  <option value="3">3 kW</option>
						  <option value="4">4 kW</option>
						  <option value="5">5 kW</option>
						</select>
		
						<p class="help-block">Help: the system requires 100 feet<sup>2</sup> of space per kW to place panels, i.e., to have a 4kw system you need 400 feet<sup>2</sup> of roof area facing south and without shadows</p>
					  <br/>
					  <button id="estimateBtn" class="btn btn-default">Estimate</button>
					  </div>
					 
					</div>
					</form>
                   </div>
                </div>
            </div>
        </div>
        <!-- end of #estimate -->

    </div>
    <!-- /.content-section-a -->

    <div class="content-section-b">

        <div class="container">

           <div id="results" class="row">
		   
		   
		   </div>
             <!--    <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">3D Device Mockups<br>by PSDCovers</h2>
                    <p class="lead">Turn your 2D designs into high quality, 3D product shots in seconds using free Photoshop actions by <a target="_blank" href="http://www.psdcovers.com/">PSDCovers</a>! Visit their website to download some of their awesome, free photoshop actions!</p>
                </div>
                <div class="col-lg-5 col-sm-pull-6  col-sm-6">
                    <img class="img-responsive" src="img/dog.png" alt="">
                </div>
            </div>
		-->
        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-b 

    <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-sm-6">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">Google Web Fonts and<br>Font Awesome Icons</h2>
                    <p class="lead">This template features the 'Lato' font, part of the <a target="_blank" href="http://www.google.com/fonts">Google Web Font library</a>, as well as <a target="_blank" href="http://fontawesome.io">icons from Font Awesome</a>.</p>
                </div>
                <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                    <img class="img-responsive" src="img/phones.png" alt="">
                </div>
            </div>

        </div>
        <!-- /.container

    </div>
    <!-- /.content-section-a -->

    <div id="contact" class="banner">

        <div class="container">

            <div class="row">
                <div class="col-lg-6">
                    <h2>Connect to myHelios:</h2>
                </div>
                <div class="col-lg-6">
                    <ul class="list-inline banner-social-buttons">
                        <li>
                            <a href="https://twitter.com/SBootstrap" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Twitter</span></a>
                        </li>
                        <li>
                            <a href="https://github.com/IronSummitMedia/startbootstrap" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                        </li>
                        <li>
                            <a href="#" class="btn btn-default btn-lg"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Linkedin</span></a>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.banner -->

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="list-inline">
                        <li>
                            <a href="#">Home</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#about">About</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#services">Services</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#contact">Contact</a>
                        </li>
                    </ul>
                    <p class="copyright text-muted small">Copyright &copy; Your Company 2014. All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
		/* CONSTANTS */
		// domestic hot water comsumption in liters per person per day
		var DHWC_PERSON = 94.6;
		// number of solar collectors
		var NUM_COLLECTORS = 2;
		// temperature increase required in Kelvin
		var DELTA_TEMP = 41;
		// water specific heat in K=kJ/(kg * K)
		var WATER_SH = 4.187;
		// natural gas system efficiency
		var NG_SYS_EFF = 0.56;
		// collector size in m^2
		var COLLECTOR_SIZE = 3.7161;
		// solar system efficiency
		var SOLAR_SYS_EFF = [0.35, 0.35, 0.4, 0.45, 0.5, 0.55, 0.55, 0.5, 0.45, 0.4, 0.4, 0.35];
		// natural gas price $ / kWh
		var NG_PRICE = [0.04928309,0.04689402, 0.050989568, 0.053617544, 0.05003394, 0.050477624, 0.054846208, 0.055255763, 0.052423009, 0.044743858, 0.04928309, 0.050580013];
		var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
		// electricity price $ / kWh
		var ELECTRICITY_PRICE = [0.24, 0.241, 0.241, 0.18, 0.18, 0.18, 0.18, 0.18, 0.189, 0.186, 0.185, 0.195];
		// PV system cost in $ / kW
		var PV_SYSTEM_COST = 4240;
		// maintenance cost per year $ / kW
		var MAINTENANCE_COST_YEAR = 20;
		// federal tax incentive
		var TAX_INCENTIVE = 0.3;
		// yearly increase in electricity price
		var ELECTRICITY_INCREASE_YEAR = 0.05;
		// yearly increase in maintenance price
		var MAINTENANCE_INCREASE_YEAR = 0.02;
		// internal rate of return
		var IRR = 0.07;
		// system lifespan in years
		var SYSTEM_LIFESPAN = 20;
		// Cut rate on initial price
		var CUT_RATE = 0.3;
		// avoid co2 emission in pounds per kWh for electricity
		var CARBON_POUNDS_PER_KWH = 0.905;
		// months
		var MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
		// api key and fixed url
		var APIKEY = "DEMO_KEY";
		var APIURL = "http://developer.nrel.gov/api/pvwatts/v5.json?api_key=" + APIKEY +"&azimuth=180&tilt=40&array_type=1&module_type=1&losses=10";
		
		/* GLOBAL VARIABLES */
		var lastresults;
    
		/* Function that executes the API call and retrieve the data*/		
		function displayData(data){
			if(data == lastresults){
				return;
			}
			var mydiv = $("#results");
			mydiv.empty();
			mydiv.append("<h2>Results</h2>");
			mydiv.append("<table class='table table-striped'>");
			mydiv.append("<tr><th colspan='2'>Solar Power Daily/Monthly Average for your location </th></tr>");
			mydiv.append("<tr><th>Month</th><th>Electricity Production</th><th>Avoided CO<sub>2</sub> emission</th></th><th>Monthly Savings</th></tr>");
			console.log(data.outputs);
			var sumSavings = 0;
			$.each(data.outputs.ac_monthly, function (i, item) {
				console.log(data.outputs.solrad_monthly[i]);
				console.log(ELECTRICITY_PRICE[i]);
				mydiv.append("<tr><td>"+MONTHS[i]+"</td><td>"+data.outputs.ac_monthly[i].toFixed(2)+" kWh</td><td>"+(data.outputs.ac_monthly[i]*CARBON_POUNDS_PER_KWH).toFixed(2)+" pounds</td><td>$ "+(data.outputs.ac_monthly[i]*ELECTRICITY_PRICE[i]).toFixed(2)+"</td></tr>");
				sumSavings += data.outputs.ac_monthly[i]*ELECTRICITY_PRICE[i];
			});
			mydiv.append("<tr><td colspan='2'>Annual estimated savings:</td><td>$ "+sumSavings.toFixed(2)+"</td></tr>");
			mydiv.append("</table>");
			
			lastresults = data;
		}

		/* Function that executes the API call and retrieve the data*/
        function loadResults(zipcode, capacity) {
            var solarAPI = APIURL + "&address=" + zipcode + "&system_capacity=" + capacity;
            $.getJSON(solarAPI, {
                tags: "Solar Power Estimation",
                tagmode: "any",
                format: "json"
            }).done(function (data) {
                console.log(data);
				displayData(data);
            }).fail(function () {
                console.log("There was an error retrieving the data. Please try again later.");
            });
        }
		$("#estimateBtn").click(function (e) {
			e.preventDefault();
            loadResults($("#zipcode").val(), $("#capacity").val());
        });

		
	</script>
</body>

</html>
